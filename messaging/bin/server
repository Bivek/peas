#!/usr/bin/env ruby
$LOAD_PATH.unshift File.join(File.dirname(__FILE__), '../..')
require 'messaging/server/message_server'

# The supervise method is like God or Monit. It keeps watch of the Celluloid actor and restarts it
# if it crashes.
supervisor = MessageServer.supervise("127.0.0.1", 4444)
trap("INT") { supervisor.terminate; exit }

sleep # Celluloid thing. Stops the main thread from finishing and allows child thread to continue.
